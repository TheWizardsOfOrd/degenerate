<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>D E G E N E R A T E</title>
    <link rel="stylesheet" href="/index.css">
    <script type="module" src="/index.js"></script>
  </head>
  <body>
    <canvas></canvas>
    <main></main>

    <script type="degenerate">
      let r = 0;
      let swing = 0.2;

      let s = 1 / 0.85;
      let increase = true;

      while(true) {
        reboot();

        rotateColor('blue', 0.03 * TAU);

        square();
        scale(1.1);

        for (let i = 0; i < 10; i++) {
          render();
        }

        if (r > swing) {
          increase = false;
        } else if (r < -swing) {
          increase = true;
        }

        if (increase) {
          r += delta() / 60000 * TAU;
          rotateColor('blue', 0.01 * TAU);
        } else {
          r -= delta() / 40000 * TAU;
          rotateColor('blue', r * 0.01 * TAU);
        }

        transform(r, [s, s], [0.05, -0.05]);

        for (let i = 0; i < 8; i++) {
          render();
        }

        await frame();
      }
    </script>
  </body>
</html>
